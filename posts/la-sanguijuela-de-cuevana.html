<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>La sanguijuela de cuevana | tin_nqn  </title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../en/rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" href="../rss.xml">
<link rel="canonical" href="http://mgaitan.github.io/posts/la-sanguijuela-de-cuevana.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Martín Gaitán">
<meta name="og:title" content="La sanguijuela de cuevana">
<meta name="og:url" content="http://mgaitan.github.io/posts/la-sanguijuela-de-cuevana.html">
<meta name="og:description" content="UPDATE Hay una nueva versión con interfaz gráfica
acá
Parece que se me hizo hobby chupar links de
cuevana.tv y el
experimento ahora tiene su versión pythonica:
Cuevanalinks .
Es un pequeño proyecto qu">
<meta name="og:site_name" content="tin_nqn">
<meta name="og:type" content="article">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator:id" content="40654511">
</head>
<body>

<!-- Menubar -->

<nav class="navbar navbar-static-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://mgaitan.github.io/">

                <div id="blog-title">
                    tin_nqn
                    <span id="blog-description">&gt;&gt;&gt; me.geek.post()</span>
                </div>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="../about.html">Sobre mí</a>
                </li>
<li>
<a href="../charlas.html">Charlas</a>
                </li>
<li>
<a href="../archive.html">Archivos</a>
                </li>
<li>
<a href="../categories/index.html">Categorías</a>
                </li>
<li>
<a href="../rss.xml">RSS</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>            </li>
<li><a href="../en/index.html" rel="alternate" hreflang="en">English</a></li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container">
    <div class="body-content">
        <!--Body content-->
        <div class="row">

            <div class="col-md-offset-2 col-md-8">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">La sanguijuela de cuevana</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Martín Gaitán</span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2011-04-09T14:22:27-03:00" itemprop="datePublished" title="Fecha de publicación: 09/04/11 14:22:27">09/04/11 14:22:27</time></a></p>
                <p class="commentline">            <a href="la-sanguijuela-de-cuevana.html#disqus_thread" data-disqus-identifier="cache/posts/la-sanguijuela-de-cuevana.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <blockquote>
<strong>UPDATE</strong> Hay una nueva versión con interfaz gráfica
<a class="reference external" href="blog/article/cuevanalinks-ahora-para-seres">acá</a>
</blockquote>
<p>Parece que se me hizo hobby <a class="reference external" href="blog/article/yendo-a-las-fuentes-de-cuevana-tv">chupar links de
cuevana.tv</a> y el
experimento ahora tiene su versión pythonica:
<a class="reference external" href="http://pypi.python.org/pypi/CuevanaLinks">Cuevanalinks</a> .</p>
<p>Es un pequeño proyecto que permite "conseguir links" de contenidos
ofrecidos en cuevana, sirviendo estos como fuentes a manejadores de
descargas como <a class="reference external" href="http://www.tucaneando.com/">Tucan</a> o
<a class="reference external" href="http://jdownloader.org/">JDownloader</a>.</p>
<p>Más allá de los resultados, me ha tenido entretenido algunas horas y me
permitió aprender (o al menos resolver) algunas cosas: cómo se usa
mercurial (y en particular un merge conflictivo con Meld), cómo se
escribe un setup.py, como se distribuye via PyPi, etc.</p>
<p>También, por supuesto, me permitió usar dos utilidades que me gustan
mucho: <a class="reference external" href="http://pyquery.org">PyQuery</a> y
<a class="reference external" href="http://pypi.python.org/pypi/plac">plac</a>.</p>
<p>La aplicación tiene dos módulos/componentes:</p>
<ol class="arabic simple">
<li>Una <a class="reference external" href="https://bitbucket.org/tin_nqn/cuevanalinks/src/943b329f3da5/cuevanalinks/cuevanaapi.py">biblioteca que intenta funcionar como
API</a>
de <a class="reference external" href="http://www.cuevana.tv">Cuevana</a> y es la encargada de
<em>scrappear</em> la web en busca de la info interesante.</li>
<li>Una <a class="reference external" href="https://bitbucket.org/tin_nqn/cuevanalinks/src/943b329f3da5/cuevanalinks/cuevanacli.py">interfaz de línea de
comandos</a>
que permite buscar links y bajar subtitulos de contenidos específicos</li>
</ol>
<div class="figure align-center">
<img alt="" src="local/cache-vignettes/L510xH296/2011-04-09-173503_562x326_scrot-1fb6b.png">
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">&lt;string&gt;</tt>, line 37)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<div class="section" id="para-que-sirve">
<h2>Para qué sirve</h2>
<p>Por ejemplo, para bajar la temporada 4 completa de Mad Men, con
subtitulos, se podría hacer esto:</p>
<pre class="literal-block">
$ cuevanalinks 'mad men' s04 -s &gt; madmen.txt &amp;&amp; tucan -d -i madmen.txt
</pre>
</div>
<div class="section" id="instalacion">
<h2>Instalación</h2>
<p>Para instalarlo, basta con usar <a class="reference external" href="http://www.pip-installer.org">pip</a></p>
<pre class="literal-block">
$ sudo pip install cuevanalinks
</pre>
<p>O con
<a class="reference external" href="http://packages.python.org/distribute/easy_install.html">easy_install</a>:</p>
<pre class="literal-block">
$ sudo easy_install cuevanalinks
</pre>
<p>O bien, bajar <a class="reference external" href="http://pypi.python.org/pypi/CuevanaLinks#downloads">el
paquete</a> y
ejecutar :</p>
<pre class="literal-block">
$ tar xvfz CuevanaLinks-0.1.tar.gz
$ cd CuevanaLinks-0.1
$ sudo python setup.py install
</pre>
</div>
<div class="section" id="algunas-posibilidades-de-la-api">
<h2>Algunas posibilidades de la API</h2>
<p>El CLI por ahora sólo expone una parte pequeña de la API, pero hay
varias posibilidades. Por ejemplo:</p>
<pre class="literal-block">
&gt;&gt;&gt; from cuevanalinks import cuevanaapi
&gt;&gt;&gt; api = cuevanaapi.CuevanaAPI ()
&gt;&gt;&gt; house = api.get_show ('house')
&gt;&gt;&gt; house.plot
u'El doctor Gregory House, especialista en el tratamiento de enfermedades infecciosas, trabaja en un hospital universitario de Princetown, donde dirige una unidad especial encargada de pacientes afectados por dolencias extrañas y en la que colabora con un selecto grupo de aventajados ayudantes.'
&gt;&gt;&gt; house7x1 = house.get_episode (7, 1)
&gt;&gt;&gt; house7x1.title
'Now What?'
&gt;&gt;&gt; house7x1.cast
['Hugh Laurie',
 'Lisa Edelstein',
 'Omar Epps',
 'Jesse Spencer',
 'Jennifer Morrison',
 'Robert Sean Leonard',
 'Olivia Wilde',
 'Peter Jacobson']
&gt;&gt;&gt; house7x1.sources
['http://www.megaupload.com/?d=DM58TA0J',
 'http://www.filesonic.com/file/36841721/?',
 'http://bitshare.com/?f=67z435xm',
 'http://www.filefactory.com/file/caf85b9']
&gt;&gt;&gt; house7x1.subs
{'ES': 'http://www.cuevana.tv/download_sub?file=s/sub/7888_ES.srt'}
</pre>
</div>
<div class="section" id="lo-que-falta">
<h2>Lo que falta</h2>
<p>Si bien es lo más prolijito que he hecho, todavía está lejos de ser un
trabajo completo, tanto en funcionalidades como en
<a class="reference external" href="http://en.wikipedia.org/wiki/Software_Quality_Assurance">SQA</a></p>
<p>Un aspecto esencial es hacer test (perdón Nati Bidart ;-) ), para lo
cual tengo que aprender a usar
<a class="reference external" href="http://code.google.com/p/python-nose/">nose</a> y
<a class="reference external" href="http://blog.ianbicking.org/minimock.html">minimock</a>.</p>
<p>Respecto a funciones, algo importante es definir cómo resuelve el CLI el
manejo de múltiples resultados para una búsqueda. Actualmente devuelve
el resultado "más relevante" sin anoticiar al usuario de otras opciones.</p>
<p>También falta documentación! Veremos la próxima.</p>
</div>
<div class="section" id="comentarios-sugerencias-bugs">
<h2>Comentarios, sugerencias, bugs</h2>
<p>Todo aporte (ideas, código, etc.) es bienvenido. Si encuentran
problemas,
<a class="reference external" href="https://bitbucket.org/tin_nqn/cuevanalinks/issues">reportenlos</a>.</p>
<p>No estoy seguro cuánto puede durar esto funcionando, ya que depende de
que el funcionamiento del sitio no cambie o yo tenga mucho tiempo y
ganas de andar parchando detrás. Por eso, si hay más interesados y
usuarios, seguramente podremos hacerlo durar más.</p>
</div>
    </div>

    <hr>
<div class="ps">
            <div class="metadata posttranslations translations">
            <h3 class="posttranslations-intro">También disponible en:</h3>
        </div>

    <p>El código de este artículo está disponible en  <a href="https://github.com/mgaitan/mgaitan.github.com/blob/writing/posts/la-sanguijuela-de-cuevana.rst" id="sourcelink">github</a>. ¿Encontraste un error? Por favor,  <a href="https://github.com/mgaitan/mgaitan.github.com/edit/writing/posts/la-sanguijuela-de-cuevana.rst" id="sourcelink">enviame un pull request</a>.</p>
    </div>

    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/python.html" rel="tag">python</a></li>
        </ul>
<ul class="pager">
<li class="previous">
                <a href="veinteanero.html" rel="prev" title="Veinteañero">Post anterior</a>
            </li>
            <li class="next">
                <a href="compartiendo-documentacion-de.html" rel="next" title="Compartiendo documentación de paquetes python">Siguiente post</a>
            </li>
        </ul></nav></aside><section class="comments"><h2>Comentarios</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="nqnwebs",
            disqus_url="http://mgaitan.github.io/posts/la-sanguijuela-de-cuevana.html",
        disqus_title="La sanguijuela de cuevana",
        disqus_identifier="cache/posts/la-sanguijuela-de-cuevana.html",
        disqus_config = function () {
            this.language = "";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="nqnwebs";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer>
                Contents © 2014         <a href="mailto:gaitan@gmail.com">Martín Gaitán</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>
                
            </footer>
</div>
        </div>
        <!--End of body content-->


    </div>
</div>

            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><script src="../assets/js/colorbox-i18n/jquery.colorbox-es.js"></script><script>jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><script src="../assets/js/jquery.timeago.js" type="text/javascript"></script><script>
    jQuery(document).ready(function() {

        if(jQuery('html').attr('lang') === 'es'){
             jQuery.timeago.settings.strings = {
               prefixAgo: "hace",
               prefixFromNow: "dentro de",
               suffixAgo: "",
               suffixFromNow: "",
               seconds: "menos de un minuto",
               minute: "un minuto",
               minutes: "unos %d minutos",
               hour: "una hora",
               hours: "%d horas",
               day: "un día",
               days: "%d días",
               month: "un mes",
               months: "%d meses",
               year: "un año",
               years: "%d años"
            };
        }
        jQuery("time.published").timeago();

        jQuery('article:not(:first)').before('<hr>');

        jQuery('.highlight pre').addClass('code');
    });
    </script>
</body>
</html>
